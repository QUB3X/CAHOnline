<!-- Board -->
<div class="board">
  <div class="black-card__container">
    <div class="black-card card-shadow" id="black-card" ng-class="{'flip': blackCard}">
      <p class="black-card__text" ng-bind-html="blackCard.text"></p>
      <span class="black-card__pick">{{blackCard ? 'Pick: ' + blackCard.pick : ''}}</span>
    </div>
  </div>
  <div class="timer__container">
    <button class="start-button pop" type="button" ng-if="iAmGameMaster && gameState==0" ng-click="startGame()">Start</button>
    <p class="waiting-text pop" ng-if="!iAmGameMaster && gameState!=1" ng-switch="gameState">
      <span ng-switch-when="0">Aspettando che il GameMaster avvii la partita...</span>
      <span ng-switch-when="2">Il vincitore Ã¨...</span>
    </p>
    <p class="waiting-text pop" ng-if="iAmGameMaster && gameState!=0 && gameState!=1" ng-switch="gameState">
      <span ng-switch-when="2">Scegli il vincitore</span>
    </p>
    <div ng-if="gameState==1" class="timer pop">
      <img class="timer__icon" src="img/clock.svg" alt="Time left">
      <div class="timer__bar" style="width: {{time*40/30}}vw"></div>
      <span class="timer__text">{{time+1}}</span>
    </div>
  </div>
  <div class="played-cards__container">
    <ul class="white-card__container">
      <!-- white cards loop here -->
      <!-- Per carta da selezionare guarda qui
        http://stackoverflow.com/a/32893768/3637244-->
      <li class="white-card__box card-shadow pop" ng-repeat="(key, value) in playedCards" ng-click="gameState==2 && iAmGameMaster && pickWinner({id: value.player, cards: value.cards})" ng-class="{'flip': (gameState==2 || gameState==3) && value.player != playerid, 'white-card--highlight': gameState==3 && winner==value.player}">
        <div class="white-card white-card--folded card-shadow pop" ng-repeat="card in value.cards">
          <p class="white-card__text" ng-bind-html="(gameState==2 || gameState==3 || value.player == playerid) ? card : ''"></p>
        </div>
      </li>
    </ul>
  </div>
</div>
<!-- Drawer (collapsable left column)-->
<div class="drawer">
  <div class="scoreboard fade" ng-class="{hidden:!isScoreboard}">
    <div class="drawer__header">
      <h3 class="drawer__title">Punteggi</h3>
      <button class="drawer__switch" ng-click="isScoreboard=!isScoreboard">
        <img class="drawer__switch__icon" src="../img/cards.png" alt="Cambia">
      </button>
    </div>
    <ul class="player-score__container">
      <li class="player-score" ng-class="{'player-score--you' : player.id==playerid}" ng-repeat="(id, player) in players | orderObjectBy : 'points' : true">
        {{player.name}}
        <img class="player-score__icon" src="../img/rating.svg" ng-show="player.isGameMaster"/>
        <span class="player-score__points">{{player.points}}</span>
      </li>
    </ul>
  </div>
  <div class="player-hand fade" ng-class="{hidden:isScoreboard}">
    <div class="drawer__header">
      <h3 class="drawer__title">La tua mano</h3>
      <button class="drawer__switch" ng-click="isScoreboard=!isScoreboard">
        <img class="drawer__switch__icon" src="../img/scoreboard.png" alt="Cambia">  
      </button>
    </div>
    <ul class="white-card__container white-card__container--expanded">
      <!-- white cards loop here -->
      <li class="white-card white-card--expanded card-shadow pop" ng-repeat="whiteCard in whiteCards" ng-click="!iAmGameMaster && gameState==1 && myPlayedCards.length<blackCard.pick && playCard($index)">
        <p class="white-card__text" ng-bind-html="whiteCard"></p>
      </li>
    </ul>
  </div>
</div>
<div class="highlight" ng-class="{'highlight--show': gameState==3}">
  <div class="black-card card--highlight card-shadow slide-in-left" id="black-card">
    <p class="black-card__text" ng-bind-html="gameState==3 ? blackCard.text : ''"></p>
    <span class="black-card__pick">{{'Pick: ' + blackCard.pick}}</span>
  </div>
  <div class="white-card__box card--highlight card-shadow slide-in-right">
    <div class="white-card white-card--folded card-shadow" ng-repeat="card in winnerCards">
      <p class="white-card__text" ng-bind-html="card"></p>
      <span class="winner__text">Giocata da {{players[winner].name}}</span>
    </div>
  </div>
</div>
<div class="highlight" ng-class="{'highlight--show': showNewGameMaster}">
  <p class="gamemaster-text">Sei il GameMaster</p>
</div>
<div class="highlight" ng-class="{'highlight--show': isWaitingRoom}">
  <p class="gamemaster-text">Attendi il prossimo turno</p>
</div>
<div class="highlight" ng-class="{'highlight--show': isToKick}">
  <p class="gamemaster-text">Non risulti partecipante ad una partita.<br>Verrai reindirizzato al menu principale.</p>
</div>